<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>–û–±–º–µ–Ω –≤–∞–ª—é—Ç</title>
  <link rel="stylesheet" href="/static/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div class="container">
    <h1 class="title">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</h1>
    
    <div class="input-section">
      <div class="input-label">–í—ã –æ—Ç–¥–∞–µ—Ç–µ</div>
      <div class="input-field">
        <input type="text" id="fromAmount" placeholder="0" pattern="[0-9]*" inputmode="decimal">
        <div class="currency-display">RUB</div>
      </div>
    </div>

    <div class="swap-btn" id="swapBtn">‚Üë‚Üì</div>

    <div class="input-section">
      <div class="input-label">–í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ</div>
      <div class="input-field">
        <input type="text" id="toAmount" placeholder="0" readonly>
        <div class="currency-display">CZK</div>
      </div>
    </div>

    <p class="rate-info">–ö—É—Ä—Å —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –º–∞–∫—Å–∏–º—É–º –Ω–∞ –æ–¥–∏–Ω —á–∞—Å</p>

    <div class="divider"></div>

    <div class="currency-pair">
      <span class="currency-from">RUB</span>
      <span class="currency-to">CZK</span>
    </div>

    <div class="divider"></div>

    <div class="rates-section">
      <div class="rate-row">
        <div class="rate-currency">CZK</div>
        <div class="rate-condition">< 20 000 CZK</div>
        <div class="rate-value">-</div>
        <div class="rate-value">3.79</div>
      </div>

      <div class="rate-row">
        <div class="rate-currency">CZK</div>
        <div class="rate-condition">> 20 000 CZK</div>
        <div class="rate-value">-</div>
        <div class="rate-value">3.75</div>
      </div>

      <div class="rate-row">
        <div class="rate-currency">
          <img src="https://cryptologos.cc/logos/tether-usdt-logo.png" class="usdt-icon" alt="USDT">
          USDT/CZK
        </div>
        <div class="rate-condition">> 1 000 USDT</div>
        <div class="rate-value">21.45</div>
        <div class="rate-value">21.95</div>
      </div>
    </div>

    <div class="divider"></div>

    <button class="action-btn" id="actionBtn">–ü–æ–º–µ–Ω—è—Ç—å</button>
  </div>

    <script>
  Telegram.WebApp.ready();
  Telegram.WebApp.expand();

  const fromAmount = document.getElementById('fromAmount');
  const toAmount = document.getElementById('toAmount');
  const actionBtn = document.getElementById('actionBtn');
  const currentRate = 3.75;

  // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞ (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)
  fromAmount.addEventListener('input', function(e) {
    this.value = this.value.replace(/[^0-9]/g, '');
    const value = parseFloat(this.value) || 0;
    toAmount.value = (value / currentRate).toFixed(2);
  });

  // –°–∫—Ä—ã—Ç–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –≤–Ω–µ –ø–æ–ª—è –≤–≤–æ–¥–∞
  document.addEventListener('click', function(e) {
    if (e.target !== fromAmount) {
      fromAmount.blur();
    }
  });

  // –ò–ª–∏ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ì–æ—Ç–æ–≤–æ" –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ
  fromAmount.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      this.blur();
    }
  });

  actionBtn.addEventListener('click', function() {
    // –°–∫—Ä—ã–≤–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –ø–æ–ø–∞–ø–∞
    fromAmount.blur();
    
    Telegram.WebApp.showPopup({
      title: '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ',
      message: '–í—ã —Ö–æ—Ç–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–±–º–µ–Ω?',
      buttons: [
        {id: 'confirm', type: 'default', text: '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å'},
        {id: 'cancel', type: 'cancel', text: '–û—Ç–º–µ–Ω–∞'}
      ]
    }, function(buttonId) {
      if (buttonId === 'confirm') {
        Telegram.WebApp.showAlert('–û–±–º–µ–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω!');
      }
    });
  });
</script>

  <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ –º–µ—Ç–æ–¥–∞ (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–∞) -->
<div id="methodPage" class="page" style="display: none;">
  <h1 class="title">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è</h1>
  
  <div class="method-option" onclick="selectMethod('account')">
    <div class="method-icon">üí≥</div>
    <div class="method-info">
      <div class="method-title">–ù–∞ —Å—á—ë—Ç</div>
      <div class="method-desc">–ü–µ—Ä–µ–≤–æ–¥ CZK –Ω–∞ –≤–∞—à —Å—á–µ—Ç</div>
    </div>
  </div>
  
  <div class="method-option" onclick="selectMethod('cash')">
    <div class="method-icon">üí∞</div>
    <div class="method-info">
      <div class="method-title">–ù–∞–ª–∏—á–Ω—ã–µ</div>
      <div class="method-desc">–ü–æ–ª—É—á–∏—Ç–µ –Ω–∞–ª–∏—á–Ω—ã–µ –≤ –ü—Ä–∞–≥–µ</div>
    </div>
  </div>
  
  <button class="back-btn" onclick="goBack()">–ù–∞–∑–∞–¥</button>
</div>

<script>
  // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –º–µ—Ç–æ–¥–æ–≤
  function showMethodPage() {
    document.getElementById('mainPage').style.display = 'none';
    document.getElementById('methodPage').style.display = 'block';
    Telegram.WebApp.BackButton.show();
  }
  
  // –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞
  function goBack() {
    document.getElementById('methodPage').style.display = 'none';
    document.getElementById('mainPage').style.display = 'block';
    Telegram.WebApp.BackButton.hide();
  }
  
  // –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞
  function selectMethod(method) {
    // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –º–µ—Ç–æ–¥–∞
    console.log('–í—ã–±—Ä–∞–Ω –º–µ—Ç–æ–¥:', method);
    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Ç—Ä–µ—Ç—å—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
  }
  
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ü–æ–º–µ–Ω—è—Ç—å" –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  document.getElementById('actionBtn').addEventListener('click', showMethodPage);
  
  // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥" –≤ Telegram
  Telegram.WebApp.onEvent('backButtonClicked', goBack);
</script>
</body>
</html>
