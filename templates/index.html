<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>–û–±–º–µ–Ω –≤–∞–ª—é—Ç</title>
  <link rel="stylesheet" href="/static/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
  <div id="mainPage" class="container">
    <h1 class="title">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</h1>
    
    <div class="input-section">
      <div class="input-label">–í—ã –æ—Ç–¥–∞–µ—Ç–µ</div>
      <div class="input-field">
        <input type="text" id="fromAmount" placeholder="0" pattern="[0-9]*" inputmode="decimal" enterkeyhint="done">
        <div class="currency-display">
          <img src="https://flagcdn.com/w40/ru.png" class="currency-flag" alt="RUB">
          RUB
        </div>
      </div>
    </div>

    <div class="swap-btn">‚Üë‚Üì</div>

    <div class="input-section">
      <div class="input-label">–í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ</div>
      <div class="input-field">
        <input type="text" id="toAmount" placeholder="0" readonly>
        <div class="currency-display">
          <img src="https://flagcdn.com/w40/cz.png" class="currency-flag" alt="CZK">
          CZK
        </div>
      </div>
    </div>

    <p class="rate-info">–ö—É—Ä—Å —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –º–∞–∫—Å–∏–º—É–º –Ω–∞ –æ–¥–∏–Ω —á–∞—Å</p>

    <div class="divider"></div>

    <div class="currency-pair">
      <span class="currency-from">
        <img src="https://flagcdn.com/w40/ru.png" class="small-flag" alt="RUB">
        RUB
      </span>
      <span class="currency-to">
        <img src="https://flagcdn.com/w40/cz.png" class="small-flag" alt="CZK">
        CZK
      </span>
    </div>

    <div class="divider"></div>

    <div class="rates-section">
      <div class="rate-row">
        <div class="rate-currency">
          <img src="https://flagcdn.com/w40/cz.png" class="currency-flag" alt="CZK">
          CZK
        </div>
        <div class="rate-condition">< 20 000 CZK</div>
        <div class="rate-value">-</div>
        <div class="rate-value">3.79</div>
      </div>

      <div class="rate-row">
        <div class="rate-currency">
          <img src="https://flagcdn.com/w40/cz.png" class="currency-flag" alt="CZK">
          CZK
        </div>
        <div class="rate-condition">> 20 000 CZK</div>
        <div class="rate-value">-</div>
        <div class="rate-value">3.75</div>
      </div>

      <div class="rate-row">
        <div class="rate-currency">
          <img src="/static/images/usdt.png" class="usdt-icon" alt="USDT">
          USDT/CZK
        </div>
        <div class="rate-condition">> 1 000 USDT</div>
        <div class="rate-value">21.45</div>
        <div class="rate-value">21.95</div>
      </div>
    </div>

    <div class="divider"></div>

    <button class="action-btn" id="actionBtn">–ü–æ–º–µ–Ω—è—Ç—å</button>
  </div>

  <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ –º–µ—Ç–æ–¥–∞ -->
  <div id="methodPage" class="container" style="display:none;">
    <h1 class="title">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è</h1>
    
    <div class="method-option" id="accountOption">
      <div class="method-icon">üí≥</div>
      <div class="method-info">
        <div class="method-title">–ù–∞ —Å—á—ë—Ç</div>
        <div class="method-desc">–ü–µ—Ä–µ–≤–æ–¥ CZK –Ω–∞ –≤–∞—à —Å—á–µ—Ç</div>
      </div>
    </div>
    
    <div class="method-option">
      <div class="method-icon">üí∞</div>
      <div class="method-info">
        <div class="method-title">–ù–∞–ª–∏—á–Ω—ã–µ</div>
        <div class="method-desc">–ü–æ–ª—É—á–∏—Ç–µ –Ω–∞–ª–∏—á–Ω—ã–µ –≤ –ü—Ä–∞–≥–µ</div>
      </div>
    </div>
    
    <button class="back-btn" id="backBtn1">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ -->
  <div id="detailsPage" class="container" style="display:none;">
    <h1 class="title">–£–∫–∞–∂–∏—Ç–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã</h1>
    
    <div class="input-section">
      <div class="input-label">–í–∞—à –±–∞–Ω–∫–æ–≤—Å–∫–∏–π —Å—á—ë—Ç</div>
      <input type="text" class="details-input" placeholder="______">
    </div>
    
    <div class="input-section">
      <div class="input-label">–ò–º—è –¥–µ—Ä–∂–∞—Ç–µ–ª—è —Å—á—ë—Ç–∞</div>
      <input type="text" class="details-input" placeholder="______">
    </div>
    
    <button class="back-btn" id="backBtn2">–ù–∞–∑–∞–¥</button>
  </div>

  <script>
    Telegram.WebApp.ready();
    Telegram.WebApp.expand();

    // –≠–ª–µ–º–µ–Ω—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü
    const fromAmount = document.getElementById('fromAmount');
    const toAmount = document.getElementById('toAmount');
    const actionBtn = document.getElementById('actionBtn');
    const accountOption = document.getElementById('accountOption');
    const backBtn1 = document.getElementById('backBtn1');
    const backBtn2 = document.getElementById('backBtn2');
    const currentRate = 3.75;

    // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞ (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)
    fromAmount.addEventListener('input', function() {
      this.value = this.value.replace(/[^0-9]/g, '');
      const value = parseFloat(this.value) || 0;
      toAmount.value = (value / currentRate).toFixed(2);
    });

    // –°–∫—Ä—ã—Ç–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    function hideKeyboard() {
      document.activeElement.blur();
    }

    // –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
    function showPage(pageId) {
      document.querySelectorAll('.container').forEach(page => {
        page.style.display = 'none';
      });
      document.getElementById(pageId).style.display = 'block';
      
      if (pageId === 'methodPage') {
        Telegram.WebApp.BackButton.show();
      } else if (pageId === 'detailsPage') {
        Telegram.WebApp.BackButton.show();
      } else {
        Telegram.WebApp.BackButton.hide();
      }
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    actionBtn.addEventListener('click', function() {
      hideKeyboard();
      showPage('methodPage');
    });

    accountOption.addEventListener('click', function() {
      showPage('detailsPage');
    });

    backBtn1.addEventListener('click', function() {
      showPage('mainPage');
    });

    backBtn2.addEventListener('click', function() {
      showPage('methodPage');
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" –≤ Telegram
    Telegram.WebApp.onEvent('backButtonClicked', function() {
      if (document.getElementById('detailsPage').style.display === 'block') {
        showPage('methodPage');
      } else if (document.getElementById('methodPage').style.display === 'block') {
        showPage('mainPage');
      }
    });

    // –°–∫—Ä—ã—Ç–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
    document.addEventListener('click', function(e) {
      if (!e.target.classList.contains('details-input') && 
          e.target !== fromAmount && 
          e.target !== actionBtn) {
        hideKeyboard();
      }
    });
  </script>
</body>
</html>
